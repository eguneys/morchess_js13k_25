const t=""+new URL("sprites_with_bg_alpha_working-CxEZ0yrB.png",import.meta.url).href;function e(t,e){let[n,r,i,s]=t,[o,h,u,l]=e;return n<o+u&&n+i>o&&r<h+l&&r+s>h}function n(t){let e,n,r,i,s,o=!1,h=0;function u(e){return[e[0]*t.width,e[1]*t.height]}return function(t,e){const n=t=>{let[e,n]=(t=>{if(t.clientX||0===t.clientX)return[t.clientX,t.clientY]})(t)??[0,0];return[(e-r.left)/r.width,(n-r.top)/r.height]};let r,i=t.getContext("2d");function s(){r=t.getBoundingClientRect(),i.imageSmoothingEnabled=!1}function o(){s()}s(),t.addEventListener("pointerdown",function(r){t.setPointerCapture(r.pointerId);let i=n(r);e.t(i)},{passive:!1}),t.addEventListener("pointermove",function(t){let r=n(t);e.i(r)},{passive:!1}),document.addEventListener("pointerup",function(t){let r=n(t);e.o(r)}),new ResizeObserver(s).observe(t),document.addEventListener("scroll",o,{capture:!0,passive:!0}),window.addEventListener("resize",o,{passive:!0})}(t,{t(t){t=u(t),r=void 0,n=t,i=t,o=!1},o(t){t=u(t),n=void 0,e=void 0,r=t},i(t){t=u(t),e=t,o=!0}}),{get h(){return e},get u(){return n},get l(){return r},get p(){return i},get k(){return s},get v(){return o},update(t){var e,n,o;s=void 0,i&&h>0&&(s=i,h=0),o=t,h=(e=h)<(n=0)?Math.min(e+o,n):e>n?Math.max(e-o,n):e,i=void 0,r=void 0}}}let r=440*Math.pow(Math.pow(2,1/12),-9),i=/^[0-9.]+$/,s=/\s+/,o=/(\d+)/,h={};"B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb".split("|").forEach(function(t,e){t.split("-").forEach(function(t){h[t]=e})});class u{frequency;duration;constructor(t){let e=t.split(s);var n;this.frequency=function(t){var e=t.split(o),n=h[e[0]],i=(parseInt(e[1])||4)-4;return r*Math.pow(Math.pow(2,1/12),n)*Math.pow(2,i)}(e[0])||0,this.duration=(n=e[1],(i.test(n)?parseFloat(n):n.toLowerCase().split("").reduce(function(t,e){return t+("w"===e?4:"h"===e?2:"q"===e?1:"e"===e?.5:"s"===e?.25:0)},0))||0)}}class l{cx;_;q;loop;m;$;M;gain;B;P;constructor(t,e=120,n=[],r=!0){this.cx=t,this._=e,this.B=null,this.A(),this.loop=r,this.m=0,this.$=0,this.q=[],this.push(n)}push(t){this.q.push(...t.map(t=>new u(t)))}A(){var t=this.gain=this.cx.createGain();return this.M={bass:void 0,mid:void 0,treble:void 0},[["bass",100],["mid",1e3],["treble",2500]].forEach(e=>{let n=this.M[e[0]]=this.cx.createBiquadFilter();n.type="peaking",n.frequency.value=e[1],t.connect(t=n)}),t.connect(this.cx.destination),this}C(){return this.stop(),this.B=this.cx.createOscillator(),this.B.type=this.P||"square",this.B.connect(this.gain),this}R(t,e){var n=60/this._*this.q[t].duration,r=n*(1-(this.$||0));return this.K(this.q[t].frequency,e),this.m&&this.q[t].frequency&&this.j(t,e,r),this.K(0,e+r),e+n}D(t){return this.q[t<this.q.length-1?t+1:0]}F(t){return t-Math.min(t,60/this._*this.m)}j(t,e,n){var r=this.D(t),i=this.F(n);return this.K(this.q[t].frequency,e+i),this.O(r.frequency,e+n),this}K(t,e){return this.B.frequency.setValueAtTime(t,e),this}O(t,e){return this.B.frequency.linearRampToValueAtTime(t,e),this}play(t){return t="number"==typeof t?t:this.cx.currentTime,this.C(),this.B.start(t),this.q.forEach((e,n)=>{t=this.R(n,t)}),this.B.stop(t),this.B.onended=this.loop?()=>this.play(t):null,this}stop(){return this.B&&(this.B.onended=null,this.B.disconnect(),this.B=null),this}}let c=new AudioContext;c.currentTime;let a=[],f=[],d=[];a=["B4 q","C5 q","E5 h","E5 q","F5 q","B4 h","D5 q","C5 q","B4 h","B4 q","B4 q","A4 h","B4 q","C5 q","D5 h","B4 q","C5 q","D5 h","E5 q","D5 q","B4 h","B4 q","B4 q","A4 h"],f=["- q","E4 h","C4 q","G4 h","E4 q","- q","- h","E4 q","C4 q","G4 q","E4 h","- q"],d=["- h","- q","A2 q","- h","- q","D3 q","- h","- q","A2 q"];let w=new l(c,96,a),p=new l(c,96,f),b=new l(c,96,d);w.$=.55,p.$=.55,b.$=.6,b.m=.01,w.gain.gain.value=.9,p.gain.gain.value=.8,b.gain.gain.value=.44,w.M.mid.frequency.value=800,w.M.mid.gain.value=3,p.M.mid.frequency.value=1200,p.M.mid.gain.value=3,b.M.bass.gain.value=6,b.M.bass.frequency.value=80,b.M.mid.gain.value=-6,b.M.mid.frequency.value=500,b.M.treble.gain.value=-2,b.M.treble.frequency.value=1400;const k=t=>(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459),Math.imul(t+(t>>>4)&252645135,16843009)>>24),v=t=>(t=t>>>8&16711935|(16711935&t)<<8)>>>16&65535|(65535&t)<<16,_=t=>v(t=(t=(t=t>>>1&1431655765|(1431655765&t)<<1)>>>2&858993459|(858993459&t)<<2)>>>4&252645135|(252645135&t)<<4);class q{G;S;constructor(t,e){this.G=0|t,this.S=0|e}static N(t){return t>=32?new q(0,1<<t-32):new q(1<<t,0)}static I(t){return new q(255,0).T(8*t)}static Z(t){return new q(16843009<<t,16843009<<t)}static empty(){return new q(0,0)}static L(){return new q(4294967295,4294967295)}static U(){return new q(129,2164260864)}static H(){return new q(402653184,24)}static J(){return new q(255,4278190080)}static V(t){return"white"===t?new q(255,0):new q(0,4278190080)}static W(){return new q(1437226410,1437226410)}static X(){return new q(2857740885,2857740885)}Y(){return new q(~this.G,~this.S)}xor(t){return new q(this.G^t.G,this.S^t.S)}union(t){return new q(this.G|t.G,this.S|t.S)}tt(t){return new q(this.G&t.G,this.S&t.S)}et(t){return new q(this.G&~t.G,this.S&~t.S)}nt(t){return this.tt(t).rt()}it(t){return this.tt(t).st()}ot(t){return t.et(this).st()}ht(t){return this.et(t).st()}ut(t){return t>=64?q.empty():t>=32?new q(this.S>>>t-32,0):t>0?new q(this.G>>>t^this.S<<32-t,this.S>>>t):this}T(t){return t>=64?q.empty():t>=32?new q(0,this.G<<t-32):t>0?new q(this.G<<t,this.S<<t^this.G>>>32-t):this}lt(){return new q(v(this.S),v(this.G))}ct(){return new q(_(this.S),_(this.G))}ft(t){const e=this.G-t.G,n=(e&t.G&1)+(t.G>>>1)+(e>>>1)>>>31;return new q(e,this.S-(t.S+n))}equals(t){return this.G===t.G&&this.S===t.S}size(){return k(this.G)+k(this.S)}st(){return 0===this.G&&0===this.S}rt(){return 0!==this.G||0!==this.S}has(t){return 0!=(t>=32?this.S&1<<t-32:this.G&1<<t)}set(t,e){return e?this.with(t):this.dt(t)}with(t){return t>=32?new q(this.G,this.S|1<<t-32):new q(this.G|1<<t,this.S)}dt(t){return t>=32?new q(this.G,this.S&~(1<<t-32)):new q(this.G&~(1<<t),this.S)}toggle(t){return t>=32?new q(this.G,this.S^1<<t-32):new q(this.G^1<<t,this.S)}wt(){return 0!==this.S?63-Math.clz32(this.S):0!==this.G?31-Math.clz32(this.G):void 0}bt(){return 0!==this.G?31-Math.clz32(this.G&-this.G):0!==this.S?63-Math.clz32(this.S&-this.S):void 0}kt(){return 0!==this.G?new q(this.G&this.G-1,this.S):new q(0,this.S&this.S-1)}vt(){return 0!==this.S&&0!==this.G||!!(this.G&this.G-1)||!!(this.S&this.S-1)}_t(){return this.vt()?void 0:this.wt()}*[Symbol.iterator](){let t=this.G,e=this.S;for(;0!==t;){const e=31-Math.clz32(t&-t);t^=1<<e,yield e}for(;0!==e;){const t=31-Math.clz32(e&-e);e^=1<<t,yield 32+t}}*reversed(){let t=this.G,e=this.S;for(;0!==e;){const t=31-Math.clz32(e);e^=1<<t,yield 32+t}for(;0!==t;){const e=31-Math.clz32(t);t^=1<<e,yield e}}}const m=t=>t>>3,g=t=>7&t,$=(t,e)=>0<=t&&t<8&&0<=e&&e<8?t+8*e:void 0,y=(t,e)=>{let n=q.empty();for(const r of e){const e=t+r;0<=e&&e<64&&Math.abs(g(t)-g(e))<=2&&(n=n.with(e))}return n},M=t=>{const e=[];for(let n=0;n<64;n++)e[n]=t(n);return e},B=M(t=>y(t,[-9,-8,-7,-1,1,7,8,9])),P=M(t=>y(t,[-17,-15,-10,-6,6,10,15,17])),A={white:M(t=>y(t,[7,9])),black:M(t=>y(t,[-7,-9]))},C=M(t=>q.Z(g(t)).dt(t)),R=M(t=>q.I(m(t)).dt(t)),E=M(t=>{const e=new q(134480385,2151686160),n=8*(m(t)-g(t));return(n>=0?e.T(n):e.ut(-n)).dt(t)}),x=M(t=>{const e=new q(270549120,16909320),n=8*(m(t)+g(t)-7);return(n>=0?e.T(n):e.ut(-n)).dt(t)}),K=(t,e,n)=>{let r=n.tt(e),i=r.lt();return r=r.ft(t),i=i.ft(t.lt()),r.xor(i.lt()).tt(e)},j=(t,e)=>{const n=q.N(t);return K(n,E[t],e).xor(K(n,x[t],e))},D=(t,e)=>((t,e)=>K(q.N(t),C[t],e))(t,e).xor(((t,e)=>{const n=R[t];let r=e.tt(n),i=r.ct();return r=r.ft(q.N(t)),i=i.ft(q.N(63-t)),r.xor(i.ct()).tt(n)})(t,e)),F=(t,e,n)=>{switch(t.role){case"pawn":return((t,e)=>A[t][e])(t.color,e);case"knight":return(t=>P[t])(e);case"bishop":return j(e,n);case"rook":return D(e,n);case"queen":return((t,e)=>j(t,e).xor(D(t,e)))(e,n);case"king":return(t=>B[t])(e)}};function O(t){let e=function(t){t=t.split(" ")[0];let e={},n=7;for(let r of t.split("/")){let t=0;for(let i of r)if(N(i)){let r=$(t,n);if(void 0!==r){let t=i,n=2;for(;void 0!==e[t];)t=i+n,n++;e[t]=r}t+=1}else t+=parseInt(i);n-=1}return e}(t);return function(t){let e=[],n=function(t){let e=[],n=function(t){let e=q.empty();for(let n of Object.keys(t))e=e.set(t[n],!0);return e}(t);for(let r of Object.keys(t)){let i=I(r),s=t[r],o=F(i,s,n);for(let h of o)for(let u of Object.keys(t))if(t[u]===h){let h,l=t[u],c=n.dt(l),a=F(i,s,c).et(o);for(let e of a)for(let n of Object.keys(t))t[n]===e&&(h=n);void 0!==h?e.push([r,u,h]):e.push([r,u])}}return e}(t);for(let r of Object.keys(t)){let t=[],i=[],s=[],o=[],h=[];for(let e of n)e[0]===r?2===e.length?t.push(e[1]):o.push([e[1],e[2]]):e[1]===r?2===e.length?i.push(e[0]):s.push([e[0],e[2]]):e[2]===r&&h.push([e[0],e[1]]);e.push({p1:r,attacks:t,attacked_by:i,blocks:s,blocked_attacks:o,blocked_attacked_by:h})}return e}(e)}const z=t=>!t.attacked_by.find(t=>t.toLowerCase()===t)&&!t.blocked_attacked_by.find(t=>t[0].toLowerCase()===t[0])&&!t.blocks.find(t=>t[0].toLowerCase()===t[0]),G=t=>!t.attacked_by.find(t=>t.toLowerCase()!==t)&&!t.blocked_attacked_by.find(t=>t[0].toLowerCase()!==t[0])&&!t.blocks.find(t=>t[0].toLowerCase()!==t[0]);const S={r:"rook",n:"knight",b:"bishop",p:"pawn",q:"queen",k:"king"};function N(t){return void 0!==S[t.toLowerCase()]}function I(t){var e;return{color:(e=t).toLowerCase()===e?"black":"white",role:S[t.toLowerCase().replace(/[2345678]/,"")]}}console.log(O("3r4/p1p2kpp/4rn2/1p6/2N1P3/3n1P2/PB4PP/R2R2K1").map(function(t){let e=t.p1,n=t.attacks.map(t=>`+${t}`).join(" "),r=t.attacked_by.map(t=>`${t}+`).join(" "),i=t.blocks.map(t=>`${t[0]}+|${t[1]}`).join(" "),s=t.blocked_attacks.map(t=>`+${t[0]}/${t[1]}`).join(" "),o=t.blocked_attacked_by.map(t=>`${t[0]}+/${t[1]}`).join(" "),h=[e];return z(t)&&h.push("z+"),G(t)&&h.push("Z+"),""!==n&&h.push(n),""!==r&&h.push(r),""!==i&&h.push(i),""!==s&&h.push(s),""!==o&&h.push(o),h.join(" ")}));let T,Z,L,Q,U=await function(t){let e=new Image;return new Promise(n=>{e.onload=()=>n(e),e.src=t})}(t);function H(t,e,n,r=1,i=r){let s,o,h;e=Math.floor(e),n=Math.floor(n),t<4?(s=32,o=32*t,h=0):t<28?(s=16,o=(t-=4)%8*16,h=32+16*Math.floor(t/8)):(s=8,o=(t-=28)%16*8,h=80+8*Math.floor(t/16)),Z.drawImage(U,o,h,s,s,e,n,s*r,s*i)}function J(t){Q.font="54px Arial";let e=1104,n=823.5;V(t[0],e,n,600,60),Q.font="32px Arial",e=1104,n=1039.5,V(t[1],e,n,600,60)}function V(t,e,n,r,i){const s=t.split(" ");let o="",h=n;for(let u=0;u<s.length;u++){const t=o+s[u]+" ";Q.measureText(t).width>r&&u>0?(Q.fillText(o,e,h),o=s[u]+" ",h+=i):o=t}Q.fillText(o,e,h)}function W(){Q.clearRect(0,0,1920,1080),Z.fillRect(0,0,320,180),H(110,0,0,320);let t=10,e=24;for(let r=0;r<8;r++)for(let n=0;n<8;n++){H(108+((r+n)%2==1?1:0),t+3.5*r*8,e+3.5*n*8,3.5)}t=10,e=0,H(111,t,e,28,3),e=248,H(111,t,e,28,3);for(let r of vt)H(ht(r.qt),...r.gt,3),r.qt.match(/2/)&&H(82,...r.gt,3),r.h&&H(112,...r.gt,3);H(111,270,188,20,10),J(Ct||(Pt||(At||Bt))),H(111,238,2,30,23);let n=bt.find(t=>t.h);if(n){let[t,e,r,i]=n.$t;Z.strokeRect(t,e,r,i)}for(let r of pt)H(r[0],r[1],r[2]);if(kt&&H(ht(kt.qt),...kt.gt,3),void 0!==Pt){let t=Et&&Rt%500<200?2:0;!function(t,e,n,r){for(let i=0;i<e;i++)H(t+i,n+8*i*2,r,2)}(119,5,260,166+t),Et&&Rt%500<200&&H(123,340,166+t,2)}H(28,...qt)}const X=[260,166,80,16];function Y(t,e){if(t.p1!==e.p1)return!1;if(t.attacks.length!==e.attacks.length)return!1;for(let n of t.attacks)if(!t.attacks.find(t=>t===n))return!1;if(t.attacked_by.length!==e.attacked_by.length)return!1;for(let n of t.attacked_by)if(!t.attacked_by.find(t=>t===n))return!1;if(t.blocks.length!==e.blocks.length)return!1;for(let n of t.blocks)if(!e.blocks.find(t=>t[0]===n[0]&&t[1]===n[1]))return!1;if(t.blocked_attacks.length!==e.blocked_attacks.length)return!1;for(let n of t.blocked_attacks)if(!e.blocked_attacks.find(t=>t[0]===n[0]&&t[1]===n[1]))return!1;if(t.blocked_attacked_by.length!==e.blocked_attacked_by.length)return!1;for(let n of t.blocked_attacked_by)if(!e.blocked_attacked_by.find(t=>t[0]===n[0]&&t[1]===n[1]))return!1;return!0}const tt=(t,e,n)=>pt.push([t,e,n,0]),et=(t,e,n,r,i)=>bt.push({info:t,$t:[e,n,r,i],h:!1});function nt(t,e,n){const r=tt,i=et;r(ht(t.p1),e+4,n+4),t.p1.match(/2/)&&r(82,e+4,n+4),i(rt.yes_piece(t.p1),e+2,n+2,12,12),r(39,(e+=8)+4,n+4),e+=8,z(t)&&(r(32,e+4,n+4),i(rt.zero_attacked_by_lower(t.p1),e+2,n+2,12,12),e+=10),G(t)&&(r(33,e+4,n+4),i(rt.zero_attacked_by_upper(t.p1),e+2,n+2,12,12),e+=10);for(let s of t.attacks)r(35,e+2,n+4),i(rt.attacks(t.p1,s),e+4,n+2,14,12),e+=5,r(ht(s),e+4,n+4),s.match(/2/)&&r(82,e+4,n+4),e+=9;for(let s of t.attacked_by)r(ht(s),e+4,n+4),s.match(/2/)&&r(82,e+4,n+4),i(rt.attacked_by(t.p1,s),e+4,n+2,14,12),r(34,(e+=9)+2,n+4),e+=5;for(let s of t.blocks)r(ht(s[1]),e+4,n+4),s[1].match(/2/)&&r(82,e+4,n+4),i(rt.blocks(t.p1,...s),e+4,n+2,24,12),r(36,(e+=9)+2,n+4),e+=5,r(ht(s[0]),e+4,n+4),s[0].match(/2/)&&r(82,e+4,n+4),e+=9;for(let s of t.blocked_attacks)r(ht(s[1]),e+4,n+4),s[0].match(/2/)&&r(82,e+4,n+4),i(rt.blocked_attacks(t.p1,s[1],s[0]),e+4,n+2,24,12),r(37,(e+=9)+2,n+4),e+=5,r(ht(s[0]),e+4,n+4),s[0].match(/2/)&&r(82,e+4,n+4),e+=9;for(let s of t.blocked_attacked_by)r(ht(s[1]),e+4,n+4),s[1].match(/2/)&&r(82,e+4,n+4),i(rt.blocked_attacked_by(t.p1,s[1],s[0]),e+4,n+2,24,12),r(38,(e+=9)+2,n+4),e+=5,r(ht(s[0]),e+4,n+4),s[0].match(/2/)&&r(82,e+4,n+4),e+=9;return[e,n]}const rt={welcome:["welcome to mor chess; drag pieces on to the board, but there are some rules.","drag out of the board to remove a piece."],yt:["chess tactics; are born out of relationships.","entangle them is our job."],Mt:["Congratulations, you satisfied all rules. Time to go deeper.","Click next to continue."],Bt:["Good job, you finished a chapter. And, there's more","Click next to continue."],Pt:["chess is fascinating isn't it, go play some chess.","Thank's for playing"],no_piece:t=>[`${ot(t)} hasn't been placed yet.`,""],yes_piece:t=>[`A ${ot(t)} on the board.`,""],zero_attacked_by_lower(t){let e=t.toLowerCase()===t?"defenders":"attackers";return[`${ot(t)} has zero ${e}.`,""]},zero_attacked_by_upper(t){let e=t.toLowerCase()===t?"attackers":"defenders";return[`${ot(t)} has zero ${e}.`,""]},attacks(t,e){let n=ot(t),r=ot(e);return[`${n} is ${it(t,e)} ${r}.`,""]},attacked_by(t,e){let n=ot(t),r=ot(e);return[`${n} is ${st(t,e)} by ${r}.`,""]},blocks(t,e,n){let r=ot(t),i=ot(e),s=ot(n);return[`${r} blocks ${i} ${it(e,n)} ${s}.`,""]},blocked_attacks(t,e,n){let r=ot(t),i=ot(e),s=ot(n);return[`${r} is ${it(t,e)} ${i}, blocked by ${s}.`,""]},blocked_attacked_by(t,e,n){let r=ot(t),i=ot(e),s=ot(n);return[`${r} is ${st(t,e)} by ${i}, blocked by ${s}.`,""]}},it=(t,e)=>t.toLowerCase()===t==(e.toLowerCase()===e)?"defending":"attacking",st=(t,e)=>t.toLowerCase()===t==(e.toLowerCase()===e)?"defended":"attacked";function ot(t){let e=I(t),n=t.match(/2/)?"2":"";return e.role[0].toUpperCase()+e.role.slice(1)+n}function ht(t){let e=I(t);return 76+{pawn:0,rook:1,bishop:2,knight:3,queen:4,king:5}[e.role]+("white"===e.color?16:0)}function ut(t){if(Rt+=t,_t.h){qt=_t.h;for(let t of vt)t.h=!1;for(let t of vt)if(e(ft(t),at(qt))){t.h=!0;break}if(void 0!==kt)kt.gt=[qt[0]-4,qt[1]-4];else{for(let t of bt)t.h=!1;for(let t of bt)e(t.$t,at(qt))&&(t.h=!0)}Et=void 0!==Pt&&e(X,at(qt))}if(_t.p){let t=vt.find(t=>t.h);if(t){t.At=!0,kt=dt(t.qt,t.gt),lt(t.gt)&&(kt.Ct=t)}}if(_t.l){if(kt){if(kt.Ct){let t=kt.Ct.gt;vt=vt.filter(e=>!(e.gt[0]===t[0]&&e.gt[1]===t[1]))}let t=lt(_t.l);if(t){let e=function(t){let e=[10+3.5*t[0]*8+2,24+3.5*t[1]*8+4];return e}(t);vt=vt.filter(t=>!(t.gt[0]===e[0]&&t.gt[1]===e[1])),vt.push(dt(kt.qt,e))}!function(){for(let t of vt){let e=lt(t.gt);if(!e)continue;let n=vt.find(n=>{if(n!==t&&n.qt[0]===t.qt[0]){let t=lt(n.gt);if(t){let n=$(...e);if($(...t)<n)return!0}}})?"2":"";t.qt=t.qt[0]+n}}(),kt=void 0,wt=!0}Et&&(mt+=1,wt=!0,Pt=void 0,void 0===Mt()&&(gt+=1,xt(),Bt=rt["welcome"+gt]))}if(wt){wt=!1,pt=[],bt=[];let t=Mt()??[],e=ct(function(){let t={};for(let n of vt){let e=lt(n.gt);if(e){let r=n.qt;t[$(...e)]=r}}let e="";for(let n=0;n<8;n++){let r=0;for(let i=0;i<8;i++){let s=$(i,n);t[s]?(r>0&&(e+=r),e+=t[s][0],r=0):r++}r>0&&(e+=r),e+="/"}return e}()),n=!0,r=2;for(let i of t){let t=238;[t,r]=nt(i,t,r);let s=e.find(t=>t.p1===i.p1),o=void 0!==s&&Y(i,s)?30:29;n=n&&30===o,tt(o,t+4,r+4),t+=10,void 0===s?(tt(31,t+4,r+4),et(rt.no_piece(i.p1),t+2,r+2,12,12)):[t,r]=nt(s,t,r),r+=12,t=182}0===t.length?gt===yt?Ct=rt.well_end:Pt=rt.well_next_chapter:Pt=n?rt.well_done:void 0}At=bt.find(t=>t.h)?.info,_t.update(t)}function lt(t){let[e,n]=t;if(e-=10,n-=24,!(e<0||e>=224||n<0||n>=224))return e=Math.floor(e/28),n=Math.floor(n/28),[e,n]}function ct(t){return O(t)}function at(t){return[t[0]+1,t[1]+1,6,6]}function ft(t){let[e,n]=t.gt;return[e,n,24,24]}function dt(t,e){return{qt:t,gt:e,h:!1,At:!1}}let wt,pt,bt,kt,vt,_t,qt,mt,gt,$t=["5k2/8/8/8/8/8/8/4K3 w - - 0 1","8/5k2/8/8/8/8/6PP/6K1 w - - 0 1","8/5k2/4rn2/8/8/8/6PP/6K1 w - - 0 1","8/5k2/8/8/8/8/8/R2R2K1 w - - 0 1","3r4/5k2/8/8/3n4/8/8/3R2K1 w - - 0 1","3r4/6k1/5rn1/8/3n4/8/6PP/3R2K1 w - - 0 1","3r4/6k1/5rn1/1p6/2Nn4/8/6PP/R2R2K1 w - - 0 1","3r4/5k2/4rn2/1p6/2N5/3n4/1B4PP/R2R2K1",void 0,"5k2/8/8/8/8/8/8/4K3 w - - 0 1"];const yt=$t.filter(t=>void 0===t).length,Mt=()=>{let t=$t[mt];if(t)return ct(t)};let Bt,Pt,At,Ct,Rt,Et;function xt(){vt=[dt("p",[20,0]),dt("n",[52,0]),dt("b",[84,0]),dt("r",[116,0]),dt("q",[148,0]),dt("k",[180,0]),dt("P",[20,248]),dt("N",[52,248]),dt("B",[84,248]),dt("R",[116,248]),dt("Q",[148,248]),dt("K",[180,248])]}!function(t){T=document.createElement("canvas"),T.width=480,T.height=270,T.classList.add("pixelated"),Z=T.getContext("2d"),Z.imageSmoothingEnabled=!1,Z.fillStyle="black",L=document.createElement("canvas"),L.width=1920,L.height=1080,Q=L.getContext("2d");let e=document.createElement("div");e.classList.add("content"),e.appendChild(T),e.appendChild(L),t.appendChild(e),Et=!1,Rt=0,Ct=void 0,Pt=void 0,At=void 0,Bt=rt.welcome,wt=!0,pt=[],bt=[],mt=0,gt=0,kt=void 0,vt=[],xt(),_t=n(T),qt=[0,0],function(t,e){const n=1e3/60;let r=performance.now(),i=0;requestAnimationFrame(function s(o){requestAnimationFrame(s);let h=Math.min(o-r,1e3);for(r=o,i+=h;i>=n;)t(n),i-=n;e(i/n)})}(ut,W)}(document.getElementById("app"));
